# Switch Configuration Scripts

Part of [SCaLE's](https://www.socallinuxexpo.org/) on-site expo network configurations, tooling and scripts 

## Scripts
* build_switch_configs.pl
-- This should be the first script you run in the tool chain. It will create the output directory if it doesn't exist. It will clean it out if it does. Then it will generate all of the switch configuration files. It will also produce the EPS files that can be combined/printed to produce human-readable port references for the tops of the switches. If you give it any arguments, it will treat those as switch names and generate only those files.

* generate_ps_maps.pl
-- This script will take the EPS files generated by the build_switch_configs.pl script and generate a printable postscript file. It will place 5 switch maps per page formatted for a landscape 11x17" printer page.

* generate_ps_stickers.pl
-- This script will take the EPS files generated by the build_switch_configs.pl script and generate a postscript file suttable for printing and cutting actual switch labels on a SummaGraphics DC4. The intent is for printing (and cutting) adhesive vinyl labels which can be placed on the tops of the switches to provide a useful port map. The resulting file may work with other vinyl printer/cutters as well. It uses spot colors (50% cyan and 50% magenta) for cutting lines and process colors for all printed material. On the DC4, there is a cut line around each sticker that cuts through the vinyl, but not the backing paper and a cut line around each "page" of stickers that will cut through the vinyl and the backing paper leaving tabs to hold the backing paper together until deliberately removed.

* generate_ps_refs.pl
-- This script takes the EPS files generated by the build_switch_configs.pl script and generates a file containing pages of switch reference maps intended for viewing on a laptop. It can be viewed on a phone, but is not optimized or likely to provide a particularly good user experience in a phone environment.

* switch_template.pm
-- PERL module to support other scripts here. Most of the actual work occurs inside these library functions, especially reading and interpreting the various configuration files and generating actual configuration data for the switches.

* switch_pinger
-- This script attempts to ping every switch and displays the status of each one.

* load_switch.py
-- WIP -- Not currently used.

* update_switches
-- WIP -- Not currently used. Probably will get deprecated in favor of Ansible rather than completed.

* override_switches
-- Loads new configuration onto switches, completely replacing existing configuration.
--- Can use -l flag as follows:
---- Build switch configurations (See build_switch_configs.pl above)
---- Set an interface on your system to an appropriate address (contact a senior team member for more information).
---- Connect that interface to the management port of the target switch.
---- Use the command as "override_switches -l <switch_name>" e.g. "override_switches -l NOC" if you are connected to the NOC switch.
---- USE CAUTION: This will load the configuration for the specified <switch_name> onto whatever switch you are connected to.
--- Can take group names as arguments. For example, group F (Ballroom F IDF and dependents) will replace configurations on NW-IDF, BallroomDE, BallroomF, BallroomG, BallroomH

* bulk_local_load_switches
-- Similar to override_switches, but set up for doing multiple switches in a row.
-- Uses MAC address of whatever switch is pingable at me0 address (see a senior team member for more information) to identify switch
-- Loads configuration for switch identified by MAC address
-- Once configuration load is complete, waits for switch to go off line and then begins looking for another switch
-- If the switch doesn't have an me0 interface configuration for SCaLE, that may need to be put on via the serial port to enable loading.
 
## Contributing
SCaLE happens once a year but the team has ongoing projects and prep year round.
If you are interesting in volunteering please request to join our mailing list:
https://lists.linuxfests.org/cgi-bin/mailman/listinfo/tech

