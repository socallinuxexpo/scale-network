# Switch Configuration Scripts

Part of [SCaLE's](https://www.socallinuxexpo.org/) on-site expo network configurations, tooling and scripts

## Scripts
- Introduction
  -- This directory contains any scripts related to the switch configuration process. This includes scripts and libraries for building the configurations, scripts for buiding the documentary port maps which are used to produce stickers for the tops of the switches as well as reference documents for the cable team, scripts for managing \(loading\) the various configs on to the switches through various means, and finally scripts related to the \"Zero Touch Provisioning\" process which we are hoping to adopt in the near future.

- Needed updates:
  -- Add documentation for ../../Makefile
  -- Add documentation for switch_config_loader
  -- Add documentation for Loader.pm
  -- Review documentation of other scripts and update as needed

- ../../Makefile
  -- There is a Makefile which will do all that is needed to generate all of the switch configuration files and the postscript and PDF map files. Its primary documentation lives in ../../README.md

- build_switch_configs.pl
  -- This is the first script to run in the manual process. Use Make instead, you will be happier. It will create the output directory if it doesn't exist. It will clean it out if it does. Then it will generate all of the switch configuration files. It will also produce the EPS files that can be combined/printed to produce human-readable port references for the tops of the switches. If you give it any arguments, it will treat those as switch names and generate only those files.

- generate_ps_maps.pl
  -- This script will take the EPS files generated by the build_switch_configs.pl script and generate a printable postscript file. It will place 5 switch maps per page formatted for a landscape 11x17" printer page.

- generate_ps_stickers.pl
  -- This script will take the EPS files generated by the build_switch_configs.pl script and generate a postscript file suttable for printing and cutting actual switch labels on a SummaGraphics DC4. The intent is for printing (and cutting) adhesive vinyl labels which can be placed on the tops of the switches to provide a useful port map. The resulting file may work with other vinyl printer/cutters as well. It uses spot colors (50% cyan and 50% magenta) for cutting lines and process colors for all printed material. On the DC4, there is a cut line around each sticker that cuts through the vinyl, but not the backing paper and a cut line around each "page" of stickers that will cut through the vinyl and the backing paper leaving tabs to hold the backing paper together until deliberately removed.

- generate_ps_refs.pl
  -- This script takes the EPS files generated by the build_switch_configs.pl script and generates a file containing pages of switch reference maps intended for viewing on a laptop. It can be viewed on a phone, but is not optimized or likely to provide a particularly good user experience in a phone environment.

- switch_template.pm
  -- PERL module to support other scripts here. Most of the actual work occurs inside these library functions, especially reading and interpreting the various configuration files and generating actual configuration data for the switches.

- switch_pinger
  -- This script attempts to ping every switch and displays the status of each one.

- override_switches -- Deprecated, use switch_config_loader instead

- bulk_local_load_switches -- Deprecated, use switch_config_loader instead

## Contributing

SCaLE happens once a year but the team has ongoing projects and prep year round.
If you are interested in volunteering please request to join our mailing list:
https://lists.linuxfests.org/cgi-bin/mailman/listinfo/tech

> NOTE:
> If you are contributing and need to debug problems with generated PostScript code,
> edit the Makefile two levels up and take out the > /dev/null redirects on the gs
> calls. This will make PostScript error reports and stdout messages visible.
>
> PostScript code can be instrumented using "(string) print" commands and "pstack()="
> can be used to dump the current contents of the operand stack. If you need a newline,
> you can use "() print". (no newlines are added if () is not empty).
>
> A little instrumentation and being able to see the messages from GS can go a long
> way in helping debug the code. Look for pstack() (commented out at this time) in
> the switch_template.pm file for examples of instrumentation.
